/*!
 * Bedhed.js - A jQuery plugin for better headers for particularly long tables
 *
 * J. Ky Marsh, jkymarsh@gmail.com
 * Copyright (c) 2012
 */(function(a,b,c,d){var e="bedhed",f={mode:"repeater",period:5,preserveStyle:!0,terminateTable:!1},g=function(b,c){this.element=b;this.defaults=f;this.name=e;this.options=a.extend({},f,c);this.init()};g.prototype.repeatHeader=function(b,c,d){var e,f="<td>",g=f.replace("<","</"),h,i=[];console.log(b);console.log(c);console.log(d);if(!c.terminateTable){e=c.headerClass?'<tr class="'+c.headerClass+'">':"<tr>";for(var j=0;j<d.length;j++){if(c.preserveStyle){h='colspan="'+d[j].colSpan+'" '+'style="'+"font-size:"+d[j].fontSize+";"+"font-weight:"+d[j].fontWeight+";"+"font-style:"+d[j].fontStyle+";"+"color:"+d[j].fontColor+";"+'"';f=f.replace(">"," "+h+">")}e+=f;e+=d[j].content;e+=g}e+="</tr>";b.find("tr").each(function(b){b%c.period===0&&b!==0&&a(this).after(e)})}else{b.find("tr").each(function(a){i.push(c.period*a);a%c.period===0&&a!==0&&b.after(b.clone())});console.log(i);b.parent().find("table").each(function(){console.log(a(this));a(this).find("tr").each(function(b){(b<=i[0]||b>i[0]+c.period)&&b!==0&&a(this).remove()});i.shift();a(this).find("tr").each(function(){a(this).siblings().length===0&&a(this).remove()});console.log(i)})}};g.prototype.fixHeader=function(c,d,e){var f=c.clone(),g=c.offset().left,h=c.outerWidth(),i=[];console.log(f);f.find("tr").each(function(b){b!==0?a(this).remove():a(this).find("th").each(function(b){console.log(a(this));a(this).css("width",e[b].width)})});d.headerClass&&f.addClass(d.headerClass);f.css("position","fixed").css("top",0).css("left",g).css("width",h).css("margin",0).hide();console.log(f);console.log(c);console.log(d);console.log(e);c.parents("body").append(f);a(b).scroll(function(){console.log(f.offset().top);console.log(c.offset().top);f.offset().top>=c.offset().top&&f.offset().top<=c.offset().top+c.height()?f.fadeIn():f.fadeOut()})};g.prototype.init=function(){var b=a(this.element),c=this.options,d=[];b.find("th").each(function(){var b={content:a(this).html(),width:a(this).width()};c.preserveStyle&&(b.fontSize=a(this).css("font-size"),b.fontWeight=a(this).css("font-weight"),b.fontStyle=a(this).css("font-style"),b.fontColor=a(this).css("color"),b.colSpan=a(this).attr("colspan"));d.push(b)});c.mode==="repeater"?this.repeatHeader(b,c,d):this.fixHeader(b,c,d)};a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})}})(jQuery,window,document);